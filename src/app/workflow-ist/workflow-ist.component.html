<div class="agent-page">
  <div class="main-content">
    <header class="content-header">
      <div class="header-left">
        <h2>All workflows ({{filteredWorkflows.length}})</h2>
      </div>
      <div class="header-right">
        <div class="search-box">
          <input
            type="text"
            placeholder="Search workflows"
            [(ngModel)]="searchQuery"
            (input)="onSearchChange(searchQuery)" /> 
        </div>
        <button class="btn-canvas">Go to canvas</button>
        <button class="btn-primary" (click)="createNewWorkflow()">New workflow</button>
      </div>
    </header>

    <table class="workflows-table">
      <thead>
        <tr>
          <th class="checkbox-col"><input type="checkbox" (change)="toggleAllSelection($event)"></th>
          <th>Name</th>
          <th>Description</th>
          <th>Triggers</th>
          <th>Status</th>
          <th>Assignee</th>
          <th>Updated</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let workflow of filteredWorkflows">
          <td><input type="checkbox" [(ngModel)]="workflow.selected"></td>
          <td>
            <a (click)="startWorkflow(workflow.flowId)" class="workflow-name">
              {{workflow.flowName}}
            </a>
          </td>
          <td>{{workflow.description || 'No description'}}</td>
          <td>
            <a (click)="startWorkflow(workflow.flowId)" class="trigger-link">
              Start
            </a>
          </td>
          <td>
            <span class="status-badge" [class.status-none]="!workflow.status">
              {{workflow.status || 'None'}}
            </span>
          </td>
          <td>{{workflow.assignee || 'â€”'}}</td>
          <td>{{workflow.updated | date:'short' || 'Just now'}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
